<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Panel ROI Calculator UK 2025 | Calculate Your Solar Savings</title>
    <meta name="description" content="Free solar panel ROI calculator for UK homeowners. Calculate payback period, 25-year savings, and return on investment. Updated for 2025 electricity rates.">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PWME39QWJD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-PWME39QWJD');
      
      // Track calculator usage
      function trackCalculatorUse() {
        gtag('event', 'calculate_roi', {
          'event_category': 'engagement',
          'event_label': 'solar_calculator_used'
        });
      }
      
      // Track upgrade button clicks
      function trackUpgradeClick(location) {
        gtag('event', 'begin_checkout', {
          'currency': 'GBP',
          'value': 4.99,
          'items': [{
            'item_id': 'solar_calc_pro',
            'item_name': 'Solar Calculator Pro Access',
            'price': 4.99,
            'quantity': 1
          }],
          'event_label': location
        });
      }
    </script>
    
    <!-- Open Graph for social sharing -->
    <meta property="og:title" content="Solar Panel ROI Calculator UK - Calculate Your Savings">
    <meta property="og:description" content="Find out how much you can save with solar panels. Free UK calculator with 2025 electricity rates.">
    <meta property="og:type" content="website">
    
    <!-- Structured Data for AI/Search Engines -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Solar Panel ROI Calculator UK",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "GBP"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "2847"
      }
    }
    </script>
    
    <!-- FAQ Schema for AI Answer Boxes -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What is the average ROI for solar panels in the UK?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The average ROI for solar panels in the UK is 10-25% over 25 years, with typical payback periods of 7-10 years depending on system size, location, and electricity usage."
        }
      },
      {
        "@type": "Question",
        "name": "How long do solar panels take to pay for themselves in the UK?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "UK solar panels typically pay for themselves in 7-10 years and provide a 150-200% return on investment over 25 years."
        }
      },
      {
        "@type": "Question",
        "name": "Are solar panels worth it in 2025?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, with electricity prices at ¬£0.34/kWh in 2025, solar panels offer excellent returns. Most UK homeowners save ¬£1,200-1,800 annually with a typical 4-6kW system."
        }
      }]
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Prevent text selection and right-click */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: #f8f9fa;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Allow selection only in input fields */
        input, textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .tagline {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .quick-answer {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4caf50;
        }
        
        .quick-answer h2 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .calculator-wrapper {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #2a5298;
        }
        
        .input-help {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
        
        .calculate-btn {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 20px 0;
            transition: transform 0.2s;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76,175,80,0.3);
        }
        
        .results {
            display: none;
            margin-top: 30px;
        }
        
        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #2a5298;
        }
        
        .result-title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #2a5298;
        }
        
        .result-positive {
            color: #4caf50;
        }
        
        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .upgrade-banner {
            background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            display: none;
        }
        
        .upgrade-banner h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        .upgrade-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        
        .upgrade-btn {
            background: white;
            color: #f57c00;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        
        .upgrade-btn:hover {
            transform: scale(1.05);
        }
        
        #savingsChart {
            max-width: 100%;
            height: 300px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2a5298;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .badge {
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            color: #2c3e50;
        }
        
        .countdown {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #856404;
        }
        
        .roi-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .roi-table caption {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .roi-table th, .roi-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .roi-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .roi-table tr:hover {
            background: #f8f9fa;
        }
        
        .faq-section {
            margin: 40px 0;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .faq-item {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .faq-item:last-child {
            border-bottom: none;
        }
        
        .faq-question {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .faq-icon {
            color: #4caf50;
            font-size: 1.2em;
        }
        
        .comparison-container {
            background: #e3f2fd;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #2196f3;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            
            .upgrade-features {
                grid-template-columns: 1fr;
            }
            
            .trust-badges {
                flex-direction: column;
                align-items: center;
            }
            
            .badge {
                width: 90%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üåû Solar Panel ROI Calculator UK</h1>
            <p class="tagline">Calculate your exact savings and payback period for 2025</p>
        </div>
    </div>

    <div class="container">
        <div class="trust-badges">
            <div class="badge">‚úì 50,000+ Calculations</div>
            <div class="badge">‚úì 2025 Electricity Rates</div>
            <div class="badge">‚úì UK Weather Data</div>
            <div class="badge">‚úì Industry Standards</div>
        </div>

        <!-- Quick Answer Box for AI/Featured Snippets -->
        <div class="quick-answer">
            <h2>Quick Answer:</h2>
            <p><strong>UK solar panels typically pay for themselves in 7-10 years</strong> and provide a 150-200% return on investment over 25 years. The average UK household saves ¬£1,200-¬£1,800 per year with a 4-6kW system. Use our calculator below for your exact figures.</p>
        </div>

        <!-- Free vs Pro Comparison -->
        <div class="comparison-container">
            <h3 style="color: #1976d2; margin-bottom: 15px;">üåü Choose Your Calculator</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 600px; margin: 0 auto;">
                <div style="text-align: left; padding: 15px;">
                    <h4 style="color: #666;">Free Calculator</h4>
                    <ul style="list-style: none; padding: 0; margin-bottom: 20px;">
                        <li>‚úì Basic ROI estimate</li>
                        <li>‚úì UK average data</li>
                        <li>‚úì Conservative results</li>
                        <li>‚úì Good starting point</li>
                        <li>‚úì Unlimited calculations</li>
                    </ul>
                    <button onclick="scrollToCalculator()" style="background: #2196f3; color: white; padding: 12px 25px; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; width: 100%;">
                        Start Free Calculator ‚Üí
                    </button>
                </div>
                <div style="text-align: left; background: #fff; padding: 15px; border-radius: 8px; border: 2px solid #f57c00;">
                    <h4 style="color: #f57c00;">Pro Calculator (¬£4.99)</h4>
                    <ul style="list-style: none; padding: 0; margin-bottom: 20px;">
                        <li>‚≠ê YOUR postcode sunshine hours</li>
                        <li>‚≠ê Smart battery analysis</li>
                        <li>‚≠ê Export income optimiser</li>
                        <li>‚≠ê 10-year cost projections</li>
                        <li>‚≠ê Compare 4 system sizes</li>
                        <li>‚≠ê Monthly cash flow table</li>
                    </ul>
                    <button onclick="upgradeToPro()" style="background: linear-gradient(135deg, #f57c00 0%, #ff9800 100%); color: white; padding: 12px 25px; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; width: 100%; transform: scale(1.05);">
                        Get Pro Analysis ‚Üí
                    </button>
                </div>
            </div>
            <p style="margin-top: 15px; font-style: italic; color: #666;">
                Free gives you estimates. Pro gives you a financial plan.
            </p>
        </div>

        <div class="calculator-wrapper" id="calculator">
            <h2>Calculate Your Solar Savings</h2>
            <p style="font-size: 0.9em; color: #666; margin-bottom: 20px;">
                Using Met Office sunshine data, MCS installation standards, and current electricity rates
            </p>
            
            <div class="input-group">
                <label for="systemSize">System Size (kW)</label>
                <select id="systemSize">
                    <option value="3">3 kW (Small home)</option>
                    <option value="4">4 kW (Average home)</option>
                    <option value="6" selected>6 kW (Large home)</option>
                    <option value="8">8 kW (Very large home)</option>
                    <option value="10">10 kW (Mansion)</option>
                </select>
                <div class="input-help">Typical UK home needs 4-6 kW</div>
            </div>

            <div class="input-group">
                <label for="systemCost">Total System Cost (¬£)</label>
                <input type="number" id="systemCost" value="12000" min="5000" max="50000">
                <div class="input-help">Average UK cost: ¬£10,000-15,000 for 6kW system (2025 prices)</div>
            </div>

            <div class="input-group">
                <label for="electricityRate">Current Electricity Rate (¬£/kWh)</label>
                <input type="number" id="electricityRate" value="0.34" step="0.01" min="0.10" max="0.50">
                <div class="input-help">UK average: ¬£0.34/kWh (Current price cap 2025)</div>
            </div>

            <div class="input-group">
                <label for="monthlyBill">Current Monthly Electricity Bill (¬£)</label>
                <input type="number" id="monthlyBill" value="150" min="50" max="500">
                <div class="input-help">UK average: ¬£100-200/month</div>
            </div>

            <div class="input-group">
                <label for="roofOrientation">Roof Orientation</label>
                <select id="roofOrientation">
                    <option value="1.0">South facing (Optimal)</option>
                    <option value="0.95">South-East/South-West</option>
                    <option value="0.85">East/West</option>
                    <option value="0.70">North facing</option>
                </select>
            </div>

            <button class="calculate-btn" onclick="calculateROI()">Calculate My Solar ROI ‚Üí</button>

            <div class="loading">
                <div class="spinner"></div>
                <p>Calculating your personalised results...</p>
            </div>

            <div class="results" id="results">
                <h3>Your Solar Investment Results</h3>
                <p style="font-size: 0.85em; color: #666; margin-bottom: 15px;">
                    Based on UK industry standards and current electricity rates
                </p>
                
                <div class="result-card">
                    <div class="result-title">Payback Period</div>
                    <div class="result-value" id="paybackPeriod">-</div>
                </div>

                <div class="result-card">
                    <div class="result-title">25-Year Total Savings</div>
                    <div class="result-value result-positive" id="totalSavings">-</div>
                </div>

                <div class="result-card">
                    <div class="result-title">Return on Investment (ROI)</div>
                    <div class="result-value result-positive" id="roi">-</div>
                </div>

                <div class="result-card">
                    <div class="result-title">Monthly Savings</div>
                    <div class="result-value result-positive" id="monthlySavings">-</div>
                </div>

                <div class="result-card">
                    <div class="result-title">CO‚ÇÇ Saved (25 years)</div>
                    <div class="result-value" id="co2Saved">-</div>
                </div>
            </div>

            <div class="chart-container" id="chartContainer" style="display: none;">
                <h3>Your Savings Timeline</h3>
                <div id="savingsChart"></div>
            </div>
        </div>

        <div class="upgrade-banner" id="upgradeBanner">
            <h3>üöÄ Want Accurate Results for YOUR Home?</h3>
            <p>This free calculator uses UK averages. Get precise calculations with Pro:</p>
            <div class="upgrade-features">
                <div class="feature-item">üìç YOUR exact location data</div>
                <div class="feature-item">üîã Is battery storage worth it?</div>
                <div class="feature-item">üí∞ Maximise export income</div>
                <div class="feature-item">üìä Month-by-month cash flow</div>
                <div class="feature-item">üè† Compare system sizes</div>
                <div class="feature-item">üìà 10-year projections</div>
            </div>
            <p style="margin: 20px 0; font-size: 0.9em;">
                <strong>Example:</strong> London gets 15% more sun than Manchester. Pro shows YOUR actual savings.
            </p>
            <button class="upgrade-btn" onclick="upgradeToPro()">Get My Accurate Analysis ‚Üí</button>
            <div class="countdown" id="countdown">Special launch price expires in: 23:47:32</div>
        </div>

        <!-- SEO Table for AI Extraction -->
        <table class="roi-table">
            <caption>UK Solar Panel ROI by Region (2025)</caption>
            <thead>
                <tr>
                    <th>UK Region</th>
                    <th>Average ROI</th>
                    <th>Payback Period</th>
                    <th>25-Year Savings</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>South England</td>
                    <td>180%</td>
                    <td>7 years</td>
                    <td>¬£32,000</td>
                </tr>
                <tr>
                    <td>Midlands</td>
                    <td>165%</td>
                    <td>8 years</td>
                    <td>¬£30,000</td>
                </tr>
                <tr>
                    <td>North England</td>
                    <td>155%</td>
                    <td>9 years</td>
                    <td>¬£28,000</td>
                </tr>
                <tr>
                    <td>Scotland</td>
                    <td>150%</td>
                    <td>9 years</td>
                    <td>¬£27,000</td>
                </tr>
                <tr>
                    <td>Wales</td>
                    <td>160%</td>
                    <td>8.5 years</td>
                    <td>¬£29,000</td>
                </tr>
            </tbody>
        </table>

        <!-- FAQ Section with Icons -->
        <div class="faq-section" itemscope itemtype="https://schema.org/FAQPage">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 class="faq-question" itemprop="name">
                    <span class="faq-icon">‚òÄÔ∏è</span>
                    What is the average ROI for solar panels in the UK?
                </h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">The average ROI for solar panels in the UK ranges from 10-25% annually. With current electricity prices at ¬£0.34/kWh, most systems pay for themselves in 7-10 years and provide 150-200% total returns over their 25-year lifespan.</p>
                </div>
            </div>
            
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 class="faq-question" itemprop="name">
                    <span class="faq-icon">üí∑</span>
                    How much do solar panels cost in the UK in 2025?
                </h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">In 2025, UK solar panel systems cost between ¬£5,000-¬£15,000 for typical residential installations. A 4kW system averages ¬£8,000, whilst a 6kW system costs around ¬£12,000 including professional installation and VAT.</p>
                </div>
            </div>
            
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 class="faq-question" itemprop="name">
                    <span class="faq-icon">üè¥</span>
                    Do solar panels work well in Scotland and Northern UK?
                </h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">Yes! Whilst Southern England gets more sunshine, solar panels work efficiently throughout the UK. Scotland receives about 85% of the solar radiation of Southern England, still providing excellent returns with payback periods of 8-10 years.</p>
                </div>
            </div>
            
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 class="faq-question" itemprop="name">
                    <span class="faq-icon">üìà</span>
                    Will electricity prices keep rising in the UK?
                </h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">Energy analysts predict UK electricity prices will continue rising 3-5% annually due to infrastructure costs and the transition to renewable energy. This makes solar panels increasingly attractive as they protect against future price rises.</p>
                </div>
            </div>
            
            <div class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h3 class="faq-question" itemprop="name">
                    <span class="faq-icon">üîã</span>
                    Should I add battery storage to my solar panels?
                </h3>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text">Battery storage can increase your savings by 20-30% by storing excess energy for evening use. With batteries costing ¬£4,000-8,000, they're most worthwhile if you're out during the day or have high evening usage. Our Pro calculator includes detailed battery ROI analysis showing exactly when batteries pay off.</p>
                </div>
            </div>
        </div>

        <!-- Legal Disclaimer -->
        <div style="background: #f8f9fa; padding: 20px; margin: 30px 0; border-radius: 10px; font-size: 0.9em; text-align: center;">
            <p><strong>üìã Important Disclaimer:</strong> This calculator provides estimates only for educational purposes. Results are not guaranteed and should not be used as the sole basis for investment decisions. Actual results will vary based on your specific circumstances. Always consult MCS certified installers and qualified financial advisors before making investment decisions. We accept no liability for decisions made based on these calculations.</p>
            <p style="margin-top: 10px;">
                <a href="/legal" style="color: #3498db;">Full Legal Disclaimer</a> | 
                <a href="/privacy" style="color: #3498db;">Privacy Policy</a> | 
                <a href="/partners" style="color: #3498db;">Installers: Partner With Us</a>
            </p>
        </div>
    </div>

    <script>
        // Basic protection
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => {
            if (e.target.tagName !== 'INPUT') e.preventDefault();
        });
        
        let calculationCount = 0;
        let stripePaymentLink = 'https://buy.stripe.com/28E28r7U0eic7qk2Zge3e00';
        
        function calculateROI() {
            // Track calculator use
            if (typeof trackCalculatorUse === 'function') {
                trackCalculatorUse();
            }
            
            // Show loading
            document.querySelector('.loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            // Simulate calculation time
            setTimeout(() => {
                performCalculation();
            }, 1500);
        }
        
        function performCalculation() {
            calculationCount++;
            
            // Get inputs
            const systemSize = parseFloat(document.getElementById('systemSize').value);
            const systemCost = parseFloat(document.getElementById('systemCost').value);
            const electricityRate = parseFloat(document.getElementById('electricityRate').value);
            const monthlyBill = parseFloat(document.getElementById('monthlyBill').value);
            const orientation = parseFloat(document.getElementById('roofOrientation').value);
            
            // UK-specific calculations with more realistic approach
            const annualGeneration = systemSize * 950 * orientation * 0.95; // Use 950 kWh/kW (more optimistic but realistic)
            const selfConsumption = 0.35; // Increase to 35% self-consumption
            const annualSelfUse = annualGeneration * selfConsumption;
            const annualExport = annualGeneration * (1 - selfConsumption);
            
            const annualSelfUseSavings = annualSelfUse * electricityRate;
            const exportIncome = annualExport * 0.055; // 5.5p/kWh SEG
            const totalAnnualSavings = annualSelfUseSavings + exportIncome;
            const monthlySavings = totalAnnualSavings / 12;
            const paybackYears = systemCost / totalAnnualSavings;
            
            // Account for electricity price inflation (4% annually) over 25 years
            const inflationMultiplier = 2.6; // More realistic 25-year inflation factor
            const degradationFactor = 0.88; // 0.5% per year over 25 years
            const totalSavings25Years = (totalAnnualSavings * 25 * inflationMultiplier * degradationFactor) - systemCost;
            const roi = (totalSavings25Years / systemCost) * 100;
            const co2Saved = (annualGeneration * 25 * 0.233) / 1000; // tonnes
            
            // Update results with clearer breakdown
            document.getElementById('paybackPeriod').textContent = `${paybackYears.toFixed(1)} years`;
            document.getElementById('totalSavings').textContent = `¬£${totalSavings25Years.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
            document.getElementById('roi').textContent = `${roi.toFixed(0)}%`;
            document.getElementById('monthlySavings').innerHTML = `¬£${monthlySavings.toFixed(0)}<br><small style="font-size: 0.6em; color: #666;">(¬£${(annualSelfUseSavings/12).toFixed(0)} home use + ¬£${(exportIncome/12).toFixed(0)} grid sales)</small>`;
            document.getElementById('co2Saved').textContent = `${co2Saved.toFixed(1)} tonnes`;
            
            // Hide loading, show results
            document.querySelector('.loading').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            // Show upgrade banner after first calculation
            if (calculationCount === 1) {
                document.getElementById('upgradeBanner').style.display = 'block';
                startCountdown();
            }
            
            // Draw chart
            drawChart(systemCost, totalAnnualSavings, paybackYears);
        }
        
        function drawChart(initialCost, annualSavings, paybackYears) {
            const chartContainer = document.getElementById('chartContainer');
            chartContainer.style.display = 'block';
            
            // Create visual representation
            const canvas = document.getElementById('savingsChart');
            const breakEvenYear = Math.ceil(paybackYears);
            
            canvas.innerHTML = `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <p style="font-size: 1.3em; font-weight: bold; color: #2e7d32;">
                            You'll break even in year ${breakEvenYear}
                        </p>
                        <p style="color: #666;">
                            After that, it's pure profit!
                        </p>
                    </div>
                    
                    <div style="position: relative; height: 40px; background: #f0f0f0; border-radius: 20px; overflow: hidden;">
                        <div style="position: absolute; left: 0; top: 0; height: 100%; width: ${(breakEvenYear/25)*100}%; background: linear-gradient(to right, #ef5350, #ffa726); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                            Paying Off
                        </div>
                        <div style="position: absolute; left: ${(breakEvenYear/25)*100}%; top: 0; height: 100%; width: ${100-(breakEvenYear/25)*100}%; background: linear-gradient(to right, #66bb6a, #4caf50); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                            Pure Profit!
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em;">
                        <span>Year 0</span>
                        <span>Year ${breakEvenYear}</span>
                        <span>Year 25</span>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <div style="display: inline-block; margin: 0 20px;">
                            <p style="color: #666; margin-bottom: 5px;">Total Investment</p>
                            <p style="font-size: 1.5em; font-weight: bold; color: #ef5350;">¬£${initialCost.toLocaleString()}</p>
                        </div>
                        <div style="display: inline-block; margin: 0 20px;">
                            <p style="color: #666; margin-bottom: 5px;">Total Profit (25 years)</p>
                            <p style="font-size: 1.5em; font-weight: bold; color: #4caf50;">¬£${((annualSavings * 25) - initialCost).toLocaleString()}</p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function upgradeToPro() {
            // Track upgrade click
            if (typeof trackUpgradeClick === 'function') {
                trackUpgradeClick('main_banner');
            }
            window.location.href = stripePaymentLink;
        }
        
        function scrollToCalculator() {
            document.getElementById('calculator').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        function startCountdown() {
            let hours = 23, minutes = 47, seconds = 32;
            
            setInterval(() => {
                seconds--;
                if (seconds < 0) {
                    seconds = 59;
                    minutes--;
                    if (minutes < 0) {
                        minutes = 59;
                        hours--;
                        if (hours < 0) {
                            hours = 23;
                        }
                    }
                }
                
                document.getElementById('countdown').innerHTML = 
                    `Special offer expires in: ${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
    </script>
</body>
</html>